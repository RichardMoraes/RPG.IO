<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Socket.IO chat</title>
    <link type="text/css" rel="stylesheet" href="styles.css">
  </head>
  <body>
    <ul id="messages"></ul>
    <form id="form" action="">
      <input id="send-message" autocomplete="off" /><button>Send</button>
    </form>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js" integrity="sha384-Gr6Lu2Ajx28mzwyVR8CFkULdCU7kMlZ9UthllibdOSo6qAiN+yXNHqtgdTvFXMT4" crossorigin="anonymous"></script>
    <script>
        window.onload = function() {
            let socket = io('http://192.168.239:3000');
            let status;

            // Sockets
            socket.on('received', message => {
              const messagesList = document.getElementById('messages');
              const newMessage = document.createElement('li');

              newMessage.textContent = message;
              messagesList.appendChild(newMessage);
            })

            // Event Listeners
            document.getElementById('form').addEventListener('submit', function(event) {
                event.preventDefault();

                const messageInput = document.getElementById('send-message');
                const message = messageInput.value.trim();

                if (message !== '') {
                    socket.emit('message', message);
                    messageInput.value = '';
                }
            });
        }
    </script>
    </body>
</html>
